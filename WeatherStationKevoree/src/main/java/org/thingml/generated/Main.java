/**
 * File generated by the ThingML IDE
 * /!\Do not edit this file/!\
 * In case of a bug in the generated code,
 * please submit an issue on our GitHub
 **/

package org.thingml.generated;

import org.thingml.java.*;
import org.thingml.java.ext.*;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Main {
public static void main(String args[]) {
//Things
final SerialJava SerialJava_JavaNode_serial = (SerialJava) new SerialJava("JavaNode_serial: SerialJava", (String)"COM13", (org.thingml.comm.rxtx.Serial4ThingML)null).buildBehavior();
final WeatherStation WeatherStation_JavaNode_app = (WeatherStation) new WeatherStation("JavaNode_app: WeatherStation", (int)2000).buildBehavior();
final TimerJava TimerJava_JavaNode_t = (TimerJava) new TimerJava("JavaNode_t: TimerJava", (java.util.Timer)new java.util.Timer(), (java.util.TimerTask)null).buildBehavior();
final byte[] JavaNode_deserializer_buffer_array = new byte[16];
final MessageDeserializer MessageDeserializer_JavaNode_deserializer = (MessageDeserializer) new MessageDeserializer("JavaNode_deserializer: MessageDeserializer", (byte)2, (byte)8, (byte)2, (short)16, (byte)0x12, (byte)0x13, (byte)0x7D, (int)3, (int)4, (int)5, JavaNode_deserializer_buffer_array, (int)0).buildBehavior();
final byte[] JavaNode_serializer_buffer_array = new byte[16];
final MessageSerializer MessageSerializer_JavaNode_serializer = (MessageSerializer) new MessageSerializer("JavaNode_serializer: MessageSerializer", (byte)2, (byte)8, (byte)2, (short)16, (byte)0x12, (byte)0x13, (byte)0x7D, (int)3, (int)4, (int)5, JavaNode_serializer_buffer_array, (int)0).buildBehavior();
//Connectors
/*final Connector c_1242161202 = */new Connector(MessageDeserializer_JavaNode_deserializer.getIn_port(), SerialJava_JavaNode_serial.getIOStream_port(), MessageDeserializer_JavaNode_deserializer, SerialJava_JavaNode_serial);
/*final Connector c_548423841 = */new Connector(MessageSerializer_JavaNode_serializer.getRemoteControl_port(), WeatherStation_JavaNode_app.getRemoteControlOut_port(), MessageSerializer_JavaNode_serializer, WeatherStation_JavaNode_app);
/*final Connector c_1314789527 = */new Connector(MessageDeserializer_JavaNode_deserializer.getRemoteControl_port(), WeatherStation_JavaNode_app.getRemoteControlIn_port(), MessageDeserializer_JavaNode_deserializer, WeatherStation_JavaNode_app);
/*final Connector c_1816369501 = */new Connector(WeatherStation_JavaNode_app.getTimer_port(), TimerJava_JavaNode_t.getTimer_port(), WeatherStation_JavaNode_app, TimerJava_JavaNode_t);
/*final Connector c_60852659 = */new Connector(MessageSerializer_JavaNode_serializer.getOut_port(), SerialJava_JavaNode_serial.getIOStream_port(), MessageSerializer_JavaNode_serializer, SerialJava_JavaNode_serial);
//Starting Things
WeatherStation_JavaNode_app.start();
MessageSerializer_JavaNode_serializer.start();
SerialJava_JavaNode_serial.start();
TimerJava_JavaNode_t.start();
MessageDeserializer_JavaNode_deserializer.start();
Runtime.getRuntime().addShutdownHook(new Thread() {
public void run() {
System.out.println("Terminating ThingML app...");MessageDeserializer_JavaNode_deserializer.stop();
SerialJava_JavaNode_serial.stop();
WeatherStation_JavaNode_app.stop();
TimerJava_JavaNode_t.stop();
MessageSerializer_JavaNode_serializer.stop();
System.out.println("ThingML app terminated. RIP!");}
});

}
}

